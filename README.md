# REST api 的首次尝试
## 起因
这是一道研发岗的试题，据HR小姐姐说是社招的题，我做起来确实有点吃力；因为我不懂商品需要怎么分类，不知道rest api 是啥。。。[代码传送门](https://github.com/colining/productmanage)

## 艰难的前行

#### 关于数据库：
首先是数据库上的：我刚看到题实在不懂多层分级是什么鬼，然后去百度了；看见知乎上面淘宝的实现，真是吓人啊；目前应该搞不明白是啥，于是就搜着搜着，大概明白意思就是一张表存商品，具有商品Id，商品类别，还可以有其他的属性；还有一张类别表，拥有类别Id，父类别Id，还有类别的属性，然后商品和类别就可以加一些奇怪的属性，但是主体框架不变；
大概就像这样：
![这里写图片描述](http://img.blog.csdn.net/20170524191832791?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjM5NzQxNzU=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

#### REST api
其实我也拿不准我是不是理解题意了，反正就跑去看关于REST 的相关内容，然后发现又和SpringMVC有关,我前几天刚看了看Spring，还没看到mvc呢，不过控制反转我还是稍微懂一点的；
[参考](http://www.yiibai.com/spring_mvc/spring-mvc-4-restful-web-services-crud-example-resttemplate.html)
项目主体都是照着这个参考写的；写完之后觉得很简单，但是过程太艰难了；

坑一：intellij idea 的默认上下文就是啥也没有，不会携带项目名；于是我在学习SpringMVC谷歌了好久这个问题；因为国内普遍用的是eclipse嘛；

坑二：REST到底是干啥的啊？其实我现在理解，就是在线修改数据库的一种api，通过uri，不同设备都可以对数据库进行增删改查；当然我现在不知道它是咋实现的；所以我试验了半天发现它确实是需要服务器的；

坑三：数据库到底该咋查询呢？增删改查很好实现，我也没写；但是题目中的呢？
对于查询一个类别的商品及子类的商品，我写了一个递归；数据量下看起来没问题，大的话肯定是不行的；

对于查询一个商品的父类：这个比较简单，从底向上，因为我是用hashmap储存了类别和父类；所以依次向上查询即可；

坑四：postman，对于REST ，好像Junit测试比较吃力，还是直接使用postman比较好；



## 迷思
1. 可不可以使用二叉树来储存多级分类呢？这个源于一道题，就是二叉树头结点为1的话。那么所有子节点/2 =父节点；在数字上表现为二进制前缀是一样的；这样就会很简单啊；对于一个子类，他的父类别，就是类别Id右移右移，再右移；对于父类找子类的话，则是找找前缀一样的，那些就是子类啦；
2. 在使用postman的时候，我发现中文是？，然后调成utf-8，又好了一会儿；然后又乱码了。最后就索性把中文都改成英文了，另外就是Chrome 直接打开json，xml，会弹出下载链接的啊；不过由于时间紧迫，我就也没在意；

## 收获
1. 虽然照猫画虎写的，但是坑还是超级多，框架方面要学习一下；不过最近还比较忙；
2. 实际写项目还是蛮累的，毕竟有个deadline，而且还有好多不懂的知识，所以真的是很紧张；



